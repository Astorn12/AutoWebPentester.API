
using AutoWebPentester.API.Model;
using AutoWebPentester.API.Models;
using Microsoft.EntityFrameworkCore;

 namespace AutoWebPentester.API.Data
{
    public class DataContext :DbContext
    {
        public DataContext(DbContextOptions<DataContext>options):base(options)
        {
            
        }
        protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<UserWebSite>()
        .HasKey(bc => new { bc.UserId, bc.WebSiteId });  
    modelBuilder.Entity<UserWebSite>()
        .HasOne(bc => bc.User)
        .WithMany(b => b.UserWebSites)
        .HasForeignKey(bc => bc.UserId);  
    modelBuilder.Entity<UserWebSite>()
        .HasOne(bc => bc.WebSite)
        .WithMany(c => c.UserWebSites)
        .HasForeignKey(bc => bc.WebSiteId);
}
            public DbSet<User> Users { get; set; }
            public DbSet<WebSite> WebSites { get; set; }
            public DbSet<UserWebSite> UserWebSites {get;set;}
    }
    
}