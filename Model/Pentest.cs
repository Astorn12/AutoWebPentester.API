using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations.Schema;
using AutoWebPentester.API.Logic.AllWithPentests.Inputs;
using AutoWebPentester.API.Models;
using Newtonsoft.Json;

namespace AutoWebPentester.API.Model
{
    public class Pentest
    {
        public int Id { get; set; }
        public DateTime Date { get; set; }


        internal string _Input { get; set; }
        
        

        [NotMapped]
        public IEnumerable<Input> Inputs
        {
            get
            {
                return _Input == null ? null : JsonConvert.DeserializeObject<IEnumerable<Input>>(_Input);
            }
            set { _Input = JsonConvert.SerializeObject(value); }
        }
        public string GetInputsAsString(){
            return _Input;
        }

        internal string _Output { get; set; }
        
        [NotMapped]
        public IEnumerable<Input> Output
        {
            get
            {
                return _Output == null ? null : JsonConvert.DeserializeObject<IEnumerable<Input>>(_Input);
            }
            set { _Output = JsonConvert.SerializeObject(value); }
        }
        public string GetOutputAsString(){
            return _Output;
        }
       


        public int UserId { get; set; }
        public User User { get; set; }

        public int PentestSketchId  { get; set; }
        public PentestSketch PentestSkech { get; set; }

        public int WebsiteId { get; set; }
        public WebSite WebSite{ get; set; }

    }
}